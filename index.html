<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRG Baden Sicherheits- und Oberrats-Verstrickungen</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .title {
            text-align: center;
            margin-bottom: 20px;
            color: #1a1a1a;
        }
        
        .title h1 {
            font-size: 24px;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .title h2 {
            font-size: 18px;
            margin: 5px 0;
            font-weight: 400;
            color: #555;
        }
        
        canvas {
            background: white;
            border: 1px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: grab;
        }
        
        canvas:active {
            cursor: grabbing;
        }
        
        .legend {
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        
        .legend h3 {
            margin: 0 0 15px 0;
            font-size: 18px;
            color: #1a1a1a;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 14px;
        }
        
        .legend-line {
            width: 40px;
            height: 3px;
            margin-right: 10px;
        }
        
        .legend-circle {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .caption {
            margin-top: 20px;
            max-width: 900px;
            padding: 15px;
            background: white;
            border-left: 4px solid #1e40af;
            font-size: 13px;
            line-height: 1.6;
            color: #333;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        
        button {
            padding: 8px 16px;
            background: #1e40af;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background: #1e3a8a;
        }
    </style>
</head>
<body>
    <div class="title">
        <h1>Sicherheits-, Vorstands- und Oberrats-Verstrickungen</h1>
        <h2>IRG Baden (2025)</h2>
    </div>
    
    <canvas id="networkCanvas" width="1400" height="1000"></canvas>
    
    <div class="controls">
        <button onclick="resetView()">Ansicht zurÃ¼cksetzen</button>
        <button onclick="toggleLabels()">Beschriftungen ein/aus</button>
    </div>
    
    <div class="legend">
        <h3>Legende â€“ AbhÃ¤ngigkeitstypen</h3>
        <div class="legend-item">
            <div class="legend-line" style="background: #dc2626;"></div>
            <span>ðŸ”´ <strong>Familie</strong> â€“ Familienbindung (Ehepartner, Kind, Cousin)</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #ea580c;"></div>
            <span>ðŸŸ  <strong>Anstellung/Sicherheit</strong> â€“ BeschÃ¤ftigt bei IRG oder als Security</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #7c3aed;"></div>
            <span>ðŸŸ£ <strong>Delegation/Oberrat</strong> â€“ Oberratsdelegierte oder Oberrat-Ersatz</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #999; border: 2px dashed #666; height: 1px;"></div>
            <span>âšª <strong>RÃ¼ckkopplung</strong> â€“ Mehrfache Verbindungen innerhalb derselben Familie/Organisation</span>
        </div>
        <div class="legend-item">
            <div class="legend-circle" style="background: #1e40af;"></div>
            <span><strong>Zentraler Knoten</strong> â€“ Rami Suliman (Vorsitzende IRG Baden)</span>
        </div>
        <div class="legend-item">
            <div class="legend-circle" style="border: 2px dashed #60a5fa; background: transparent;"></div>
            <span><strong>Stadt-Cluster</strong> â€“ Regionale Gemeinden mit lokalen VorstÃ¤nden</span>
        </div>
    </div>
    
    <div class="caption">
        <strong>Forensische Analyse:</strong> Visualisierung institutioneller, familiÃ¤rer und sicherheitsbezogener AbhÃ¤ngigkeiten innerhalb der IRG Baden (2025). Alle Verbindungen laufen auf <strong>Rami Suliman â€“ Vorsitzende der IRG Baden</strong> zu und zeigen eine Konzentration von Einfluss und StimmenabhÃ¤ngigkeit Ã¼ber Familien- und BeschÃ¤ftigungsnetzwerke. Die PfeilstÃ¤rke korreliert mit der Anzahl der AbhÃ¤ngigkeitstypen: dickere Linien bedeuten mehrfache AbhÃ¤ngigkeiten (z.B. Familie + Anstellung + Delegation).
    </div>

    <script>
        const canvas = document.getElementById('networkCanvas');
        const ctx = canvas.getContext('2d');
        
        let showLabels = true;
        let scale = 1;
        let offsetX = 0;
        let offsetY = 0;
        let isDragging = false;
        let lastX = 0;
        let lastY = 0;
        
        // Central node
        const center = {
            x: 700,
            y: 500,
            label: "Rami Suliman",
            subtitle: "Vorsitzende IRG Baden"
        };
        
        // City clusters positioned in circle around center
        const radius = 320;
        const clusters = [
            {
                city: "Pforzheim",
                angle: 210,
                nodes: [
                    { 
                        label: "Cousin (Security)", 
                        deps: ["familie", "sicherheit"],
                        offsetX: -20,
                        offsetY: 0
                    }
                ]
            },
            {
                city: "LÃ¶rrach",
                angle: 180,
                nodes: [
                    { 
                        label: "Frau Shenker", 
                        subtitle: "Vorsitzende & Oberrat", 
                        deps: ["oberrat"],
                        offsetX: -50,
                        offsetY: -10
                    },
                    { 
                        label: "Sohn (Security)", 
                        deps: ["familie", "sicherheit"], 
                        parent: 0,
                        offsetX: -50,
                        offsetY: 20
                    }
                ]
            },
            {
                city: "Konstanz",
                angle: 240,
                nodes: [
                    { 
                        label: "Herr Albilia", 
                        subtitle: "IRG-Mitarbeiter, Oberrat-Ersatz", 
                        deps: ["sicherheit", "oberrat"],
                        offsetX: 0,
                        offsetY: -30
                    },
                    { 
                        label: "Sohn (Security)", 
                        deps: ["familie", "sicherheit"], 
                        parent: 0,
                        offsetX: 0,
                        offsetY: 10
                    }
                ]
            },
            {
                city: "Freiburg",
                angle: 150,
                nodes: [
                    { 
                        label: "Irina Katz", 
                        subtitle: "Vorsitzende & Oberrat", 
                        deps: ["oberrat"],
                        offsetX: -60,
                        offsetY: 10
                    },
                    { 
                        label: "Sohn Nikita (Security)", 
                        deps: ["familie", "sicherheit"], 
                        parent: 0,
                        offsetX: -60,
                        offsetY: 40
                    }
                ]
            },
            {
                city: "Rottweil",
                angle: 90,
                nodes: [
                    { 
                        label: "Tatiana Malafi", 
                        subtitle: "Vorsitzende / GeschÃ¤ftsfÃ¼hrerin", 
                        deps: ["sicherheit"],
                        offsetX: 0,
                        offsetY: 40
                    },
                    { 
                        label: "Sohn Mischa", 
                        subtitle: "Security-Chef, Oberrat-Ersatz", 
                        deps: ["familie", "sicherheit", "oberrat"], 
                        parent: 0,
                        offsetX: 0,
                        offsetY: 80
                    }
                ]
            },
            {
                city: "Emmendingen",
                angle: 300,
                nodes: [
                    { 
                        label: "Olga Maryanovskaya", 
                        subtitle: "Vorsitzende & Oberrat", 
                        deps: ["oberrat"],
                        offsetX: 30,
                        offsetY: -40
                    },
                    { 
                        label: "Tochter (Jugendchefin)", 
                        deps: ["familie", "sicherheit"], 
                        parent: 0,
                        offsetX: 60,
                        offsetY: -10
                    },
                    { 
                        label: "Ruslan Manasherov", 
                        subtitle: "Security-Chef & Oberrat", 
                        deps: ["sicherheit", "oberrat"],
                        offsetX: 60,
                        offsetY: 20
                    }
                ]
            },
            {
                city: "Baden-Baden",
                angle: 330,
                nodes: [
                    { 
                        label: "ehem. Security-Chef Koch", 
                        deps: ["sicherheit"],
                        offsetX: 50,
                        offsetY: 0
                    }
                ]
            },
            {
                city: "Heidelberg",
                angle: 30,
                nodes: [
                    { 
                        label: "Dima", 
                        subtitle: "Hausmeister + Lieferdienste", 
                        deps: ["sicherheit"],
                        offsetX: 40,
                        offsetY: 10
                    }
                ]
            },
            {
                city: "Mannheim",
                angle: 60,
                nodes: [
                    { 
                        label: "Sicherheitskraft", 
                        subtitle: "Revierfahrer-Hintergrund", 
                        deps: ["sicherheit"],
                        offsetX: 40,
                        offsetY: 30
                    }
                ]
            }
        ];
        
        // Calculate actual positions
        clusters.forEach(cluster => {
            const angleRad = (cluster.angle * Math.PI) / 180;
            cluster.x = center.x + radius * Math.cos(angleRad);
            cluster.y = center.y + radius * Math.sin(angleRad);
        });
        
        const depColors = {
            familie: "#dc2626",
            sicherheit: "#ea580c",
            oberrat: "#7c3aed"
        };
        
        function drawArrow(fromX, fromY, toX, toY, color, width, dashed = false) {
            ctx.save();
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.fillStyle = color;
            
            if (dashed) {
                ctx.setLineDash([5, 5]);
            }
            
            const angle = Math.atan2(toY - fromY, toX - fromX);
            const headLength = 15;
            
            const shortenTo = 50;
            const dx = toX - fromX;
            const dy = toY - fromY;
            const length = Math.sqrt(dx * dx + dy * dy);
            const ratio = (length - shortenTo) / length;
            const endX = fromX + dx * ratio;
            const endY = fromY + dy * ratio;
            
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(endX, endY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(endX, endY);
            ctx.lineTo(
                endX - headLength * Math.cos(angle - Math.PI / 6),
                endY - headLength * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                endX - headLength * Math.cos(angle + Math.PI / 6),
                endY - headLength * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fill();
            
            ctx.restore();
        }
        
        function wrapText(text, maxWidth) {
            const words = text.split(' ');
            const lines = [];
            let currentLine = words[0];
            
            for (let i = 1; i < words.length; i++) {
                const width = ctx.measureText(currentLine + " " + words[i]).width;
                if (width < maxWidth) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }
        
        function drawNetwork() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(offsetX, offsetY);
            ctx.scale(scale, scale);
            
            // Draw city clusters
            clusters.forEach(cluster => {
                // Cluster circle
                ctx.strokeStyle = "#60a5fa";
                ctx.lineWidth = 2;
                ctx.setLineDash([8, 4]);
                ctx.beginPath();
                ctx.arc(cluster.x, cluster.y, 100, 0, Math.PI * 2);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // City label
                ctx.fillStyle = "#1e40af";
                ctx.font = "bold 18px sans-serif";
                ctx.textAlign = "center";
                ctx.fillText(cluster.city, cluster.x, cluster.y - 115);
                
                // Draw connections first (so they're behind nodes)
                cluster.nodes.forEach((node, idx) => {
                    const nodeX = cluster.x + (node.offsetX || 0);
                    const nodeY = cluster.y + (node.offsetY || 0);
                    
                    // Draw feedback loop if node has parent
                    if (node.parent !== undefined) {
                        const parent = cluster.nodes[node.parent];
                        const parentX = cluster.x + (parent.offsetX || 0);
                        const parentY = cluster.y + (parent.offsetY || 0);
                        
                        // Curved feedback arrow
                        ctx.strokeStyle = "#999";
                        ctx.lineWidth = 1.5;
                        ctx.setLineDash([5, 5]);
                        ctx.beginPath();
                        ctx.moveTo(parentX + 10, parentY);
                        const cpX = (parentX + nodeX) / 2 - 30;
                        const cpY = (parentY + nodeY) / 2;
                        ctx.quadraticCurveTo(cpX, cpY, nodeX + 10, nodeY);
                        ctx.stroke();
                        ctx.setLineDash([]);
                        
                        // Small arrow head
                        const angle = Math.atan2(nodeY - cpY, nodeX + 10 - cpX);
                        ctx.fillStyle = "#999";
                        ctx.beginPath();
                        ctx.moveTo(nodeX + 10, nodeY);
                        ctx.lineTo(
                            nodeX + 10 - 8 * Math.cos(angle - Math.PI / 6),
                            nodeY - 8 * Math.sin(angle - Math.PI / 6)
                        );
                        ctx.lineTo(
                            nodeX + 10 - 8 * Math.cos(angle + Math.PI / 6),
                            nodeY - 8 * Math.sin(angle + Math.PI / 6)
                        );
                        ctx.closePath();
                        ctx.fill();
                    }
                    
                    // Draw connections to center
                    node.deps.forEach((dep, depIdx) => {
                        const width = node.deps.length * 2 + 2;
                        drawArrow(nodeX, nodeY, center.x, center.y, depColors[dep], width);
                    });
                });
                
                // Draw nodes and labels
                cluster.nodes.forEach((node, idx) => {
                    const nodeX = cluster.x + (node.offsetX || 0);
                    const nodeY = cluster.y + (node.offsetY || 0);
                    
                    // Draw node circle
                    ctx.fillStyle = "#f0f9ff";
                    ctx.strokeStyle = "#3b82f6";
                    ctx.lineWidth = 2.5;
                    ctx.beginPath();
                    ctx.arc(nodeX, nodeY, 10, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    
                    // Node labels with better positioning
                    if (showLabels) {
                        ctx.fillStyle = "#1a1a1a";
                        ctx.font = "bold 12px sans-serif";
                        ctx.textAlign = "left";
                        
                        const labelX = nodeX + 15;
                        const labelY = nodeY + 4;
                        
                        const lines = wrapText(node.label, 120);
                        lines.forEach((line, lineIdx) => {
                            ctx.fillText(line, labelX, labelY + lineIdx * 14);
                        });
                        
                        if (node.subtitle) {
                            ctx.fillStyle = "#666";
                            ctx.font = "11px sans-serif";
                            const subLines = wrapText(node.subtitle, 120);
                            subLines.forEach((line, lineIdx) => {
                                ctx.fillText(line, labelX, labelY + (lines.length + lineIdx) * 14 + 2);
                            });
                        }
                    }
                });
            });
            
            // Draw center node (Rami Suliman) - on top
            ctx.fillStyle = "#1e40af";
            ctx.beginPath();
            ctx.arc(center.x, center.y, 45, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = "white";
            ctx.font = "bold 16px sans-serif";
            ctx.textAlign = "center";
            ctx.fillText("Rami Suliman", center.x, center.y - 8);
            ctx.font = "12px sans-serif";
            ctx.fillText("Vorsitzende", center.x, center.y + 8);
            ctx.fillText("IRG Baden", center.x, center.y + 24);
            
            ctx.restore();
        }
        
        function resetView() {
            scale = 1;
            offsetX = 0;
            offsetY = 0;
            drawNetwork();
        }
        
        function toggleLabels() {
            showLabels = !showLabels;
            drawNetwork();
        }
        
        // Mouse interaction
        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            lastX = e.clientX;
            lastY = e.clientY;
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                offsetX += e.clientX - lastX;
                offsetY += e.clientY - lastY;
                lastX = e.clientX;
                lastY = e.clientY;
                drawNetwork();
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
        });
        
        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            scale *= delta;
            scale = Math.max(0.3, Math.min(2, scale));
            drawNetwork();
        });
        
        // Initial draw
        drawNetwork();
    </script>
</body>
</html>
